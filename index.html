<!doctype html>
<html>
  <head>
    <title>fritzing-tutor</title>
  </head>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <body>
    <h1>Tutor</h1>
    <div id="container" style="width: 650px;margin: 0;position: relative;">
      <img style="position: absolute;width: 100%;z-index: 100; top:0px; left: 0px;" src="breadboard/breadboard2.svg">
      <img src="breadboard/11LC040_breadboard.svg" style="position: absolute; top: 89px; left: 11px; z-index: 200">
      <img src="breadboard/11LC010_breadboard.svg" style="position:absolute; top: 89px; left: 201px; z-index: 200">
      <!--img src="breadboard/Adafruit_Atmega32u4_Breakout.svg" style="position:absolute; top: 49px; left: 201px; z-index: 200"-->

    </div>
  </body>
  <style>
  </style>
  <script>
    let socket = io.connect("http://localhost:3000/tutor");
    socket.on("circuit change", function(comp, pos, size, id, flag){
      if (flag === "add") {
        let width = size.split(",")[0];
        let height = size.split(",")[1];
        let posx = pos.split(",")[0];
        let posy = pos.split(",")[1];
        let newSvg = $("<img src=" + comp + ">");
        $("#container").append(newSvg);
        newSvg.attr("id", id);
        if (size) {
          newSvg.attr("width", width).attr("height", height);
        }
        let js_svg = document.getElementById(id);
        let left_px = 11 + (posx - 1) * 10;
        let top_px = {
          "F": "89px",
          "G": "79px",
          "H": "69px",
          "I": "59px",
          "J": "49px",
          "A": "159px",
          "B": "149px",
          "C": "139px",
          "D": "129px",
          "E": "119px"
        }
        js_svg.style.left = left_px + "px";
        js_svg.style.top = top_px[posy];
        js_svg.style.position = "absolute";
        js_svg.style["z-index"] = 200;
        
      }
     else {
       
         $("#" + id).remove();
       
     }
    });
    
    
    </script>
</html>